<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Cloud Certification - Essential Cloud Infrastructure &#183; Stephan's Blog</title><meta name=description content="This is the second chapter of the way towards the Associate GCP Cloud Certification."><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link href=https://v9rt3x.github.io/css/concated.min.css rel=stylesheet><style>body{background:#ecedef url(https://v9rt3x.github.io/img/painting.png)repeat}</style></head><body class=single-body><nav class="nav-bar side-padding"><h1 class=nav-header><a href=https://v9rt3x.github.io class=nav-text>v9rt3x</a></h1><div class=hamburger-menu><button onclick=hamburgerMenuPressed.call(this) aria-haspopup=true aria-expanded=false aria-controls=menu aria-label=Menu>
<span></span><span></span></button><ul id=menu class=hamburger-menu-overlay><li><a href=https://v9rt3x.github.io class=hamburger-menu-overlay-link>Home</a></li><li><a href=https://v9rt3x.github.io/categories/certification class=hamburger-menu-overlay-link>Certification</a></li><li><a href=https://v9rt3x.github.io/categories/fingerpicking class=hamburger-menu-overlay-link>Fingerpicking</a></li></ul></div></nav><main class="content side-text-padding"><article class="post dropcase"><header class=post-header><h1 class=post-title>Cloud Certification - Essential Cloud Infrastructure</h1><p class=post-date>Posted <time datetime=2020-03-01>Mar 1, 2020</time></p></header><h1 id=gcp--cloud-certification--associate-cloud-engineer-cheat-sheer>GCP - Cloud Certification - Associate Cloud Engineer Cheat Sheer</h1><h3 id=compute-services>Compute Services:</h3><ul><li>Compute Engine</li><li>Kubernetes Engine</li><li>App Engine</li><li>Cloud Functions</li></ul><h3 id=ways-to-interact-with-gcp>Ways to interact with GCP</h3><ul><li>GCP Console (Web user interface)</li><li>Cloud Shell and Cloud SDK (Command-line interface)</li><li>REST-based API (Custom applications)</li><li>Cloud Mobile App</li></ul><h3 id=cloud-shell-provides-the-following>Cloud shell provides the following:</h3><ul><li>Temporary Compute Engine VM</li><li>Command-line access to the instance via a browser</li><li>5 GB of persistent disk storage ($HOME dir)</li><li>Pre-installed Cloud SDK and other tools</li><li>gcloud: for working with Google Compute Engine and many GCP services</li><li>gsutil: for working with Cloud Storage</li><li>kubectl: for working with Google Container Engine and Kubernetes</li><li>bq: for working with BigQuery</li><li>Language support for Java, Go, Python, Node.js, PHP, and Ruby</li><li>Web preview functionality</li><li>Built-in authorization for access to resources and instances</li><li>To create a persistent state in Cloud Shell, you need to configure the .profile file.</li></ul><h3 id=vpc>VPC</h3><ul><li>VPC is a comprehensive set of Google managed networking objects.</li><li>Objects:<ul><li>Projects</li><li>Networks<ul><li>Default, auto mode, custom mode</li></ul></li><li>Subnetworks</li><li>Regions</li><li>Zones</li><li>IP Addresses<ul><li>internal, external, range</li></ul></li><li>VMs</li><li>Routes</li><li>Firewall rules</li></ul></li></ul><h3 id=projects>Projects</h3><ul><li>Associates objects and services with billing.</li><li>Contains networks (up to 5) that can be shared/peered</li></ul><h3 id=network>Network</h3><ul><li>Has no IP address range.</li><li>Is global and spans all available regions.</li><li>Contains subnetworks.</li><li>Is available as default, auto, or custom.</li></ul><h3 id=3-vpc-network-types>3 VPC Network types</h3><ol><li>Default<ul><li>Every project</li><li>One subnet per region</li><li>Default firewall rules</li></ul></li><li>Auto Mode<ul><li>Default network</li><li>One subnet per region</li><li>Regional IP allocation</li><li>Fixed /20 subnetwork per region</li><li>Expandable up to /16</li></ul></li><li>Custom Mode<ul><li>No default subnets created</li><li>Full control of IP ranges</li><li>Regional IP allocation</li><li>Expandable to any RFC 1918 size</li></ul></li></ol><h3 id=subnetworks-cross-zones>Subnetworks cross zones</h3><ul><li>VMs can be on the same subnet but in different zones.</li><li>A single firewall rule can apply to both VMs.</li><li>Every subnet has four reserved IP addresses in its primary IP range.</li></ul><h3 id=ip-addresses>IP Addresses</h3><ul><li>Each virtual machine can have two IP addresses assigned (internal+external)</li><li>External IPs are mapped to internal IPs</li><li>DNS resolution for internal addresses:<ul><li>Each instance has a hostname that can be resolved to an internal IP address</li><li>Name resolution is handled by internal DNS resolver</li></ul></li><li>DNS resolution for external addresses:<ul><li>Instances with external IP addresses can allow connections from hosts outside the project.</li><li>DNS records for external addresses can be published using existing DNS servers (outside of GCP)</li><li>DNS zones can be hosted using Cloud DNS.</li></ul></li></ul><table><thead><tr><th>Internal IP</th><th>External IP</th></tr></thead><tbody><tr><td>Allocated from subnet range to VMs by DHCP</td><td>Assigned from pool (ephemeral) or Reserved (static)</td></tr><tr><td>DHCP lease is renewed every 24 hours</td><td>Billed when not attached to a running VM</td></tr><tr><td>VM name + IP is registered with network-scoped DNS</td><td>VM doesn't know external IP; it is mapped to the internal IP</td></tr></tbody></table><h3 id=routes-and-firewall-rules>Routes and firewall rules</h3><ul><li>A route is a mapping of an IP range to a destination.</li><li>Every network has:<ul><li>Routes that let instances in a network send traffic directly to each other.</li><li>A default route that directs packets to destinations that are outside the network.</li><li><em><strong>Firewall rules must also allow the packet.</strong></em></li></ul></li><li>Routes map traffic to destination networks.</li><li>Firewall rules protect VM instances from unapproved connections</li><li>Firewall rules are applied to the network as a whole.</li><li>Firewall rules are stateful. (firewall rules allow bidirectional communication once a session is established)</li><li>Default: Deny all ingress and allow all egress.</li><li>A firewall rule is composed of the following parameters:<ul><li>Direction: ingress/egress rules</li><li>Source or Destination: ingress/egress specific rules</li><li>Protocol and Port: Protocol/Port specific rules</li><li>Action: Allow/Deny packets that match the direction,protocol,port..</li><li>Priority: Governs the order in which rules are evaluated.</li><li>Rules Assignment: All rules are assigned to all instances. But certain rules can be assigned</li></ul></li></ul><h3 id=network-pricing>Network Pricing</h3><ul><li>Each GCP service has its own pricing model.</li></ul><p>The following rates do not apply for Cloud CDN, CDN Interconnect, Carrier Peering, Direct peering and Cloud Interconnect traffic.</p><table><thead><tr><th>Traffic type</th><th>Price</th></tr></thead><tbody><tr><td>Ingress</td><td>No charge</td></tr><tr><td>Egress to the same zone (internal IP address)</td><td>No charge</td></tr><tr><td>Egress to Google products (YouTube, Maps..)</td><td>No charge</td></tr><tr><td>Egress to different GCP service (within same region, exceptions)</td><td>No charge</td></tr><tr><td>Egress between zones in the same region (per GB)</td><td>$0.01</td></tr><tr><td>Egress to the same zone (external IP address, per GB)</td><td>$0.01</td></tr><tr><td>Egress between regions within the US (per GB)</td><td>$0.01</td></tr><tr><td>Egress between regions, not including traffic between US regions</td><td>At internet egress rates</td></tr></tbody></table><h3 id=common-network-designs>Common Network Designs</h3><ul><li>Putting resources in different zones.</li><li>Putting resources in different regions.</li><li>Bastion host isolation:<ul><li>Provide an external facing point of entry into a network containing private network instances.</li></ul></li><li>Access internal load balancer using HTTPS load balancer</li><li>Access internal load balancer using Cloud VPN or Cloud Interconnect.</li><li>Shared VPC network with an inline security appliance.</li></ul><h3 id=gcp-compute-and-processing-options>GCP compute and processing options</h3><table><thead><tr><th></th><th>Compute Engine</th><th>Kubernetes Engine</th><th>App Engine Standard</th><th>App Engine Flexible</th><th>Cloud Functions</th></tr></thead><tbody><tr><td>Language Support</td><td>Any</td><td>Any</td><td>Python, Node.js, Go, Java, PHP</td><td>Python, Node, Go, Java, PHP, Ruby, .NET..</td><td>Python, Node, Go</td></tr><tr><td>Usage model</td><td>IaaS</td><td>IaaS,PaaS</td><td>PaaS</td><td>PaaS</td><td>Microservices Architecture</td></tr><tr><td>Scaling</td><td>Server Autoscaling</td><td>Cluster</td><td>Autoscaling managed servers</td><td>Autoscaling managed servers</td><td>Serverless</td></tr><tr><td>Primary use case</td><td>General Workloads</td><td>Container Workloads</td><td>Scalable web apps, Mobile Web Apps.</td><td>Scalable web apps, Mobile Web Apps.</td><td>Lightweight Event Actions</td></tr></tbody></table><h3 id=compute-engine-features>Compute Engine Features</h3><ol><li>Machine rightsizing:<ul><li>Recommendation engine for optimum machine size</li><li>Stackdriver statistics</li><li>New recommendation 24hrs after VM create or resize</li></ul></li><li>Global load balancing:<ul><li>Multiple regions for availability</li></ul></li><li>Available policies:<ul><li>Live migrate</li><li>Auto restart</li></ul></li></ol><h3 id=compute-options>Compute options:</h3><ul><li>Several machine types<ul><li>Network throughput scales at 2 Gbps per vCPU</li><li>Theoretical max throughput of 16 Gbps with 8 vCPU</li></ul></li><li>A vCPU is equal to 1 hardware hyper-thread</li></ul><h3 id=storage-options>Storage options:</h3><ul><li>Disks<ul><li>Standard, SSD, or Local SSD</li><li>Standard and SSD PDs scale in performance for each GB of space allocated</li></ul></li><li>Resize disks or migrate instances with no downtime</li><li>Data that is stored on local SSDs persists only until one stops or deletes the instance</li></ul><h3 id=networking-options>Networking options:</h3><ul><li>Robust networking features<ul><li>Default, custom networks</li><li>Inbound/outbound firewall rules<ul><li>IP based</li><li>Instance/group tags</li></ul></li><li>Regional HTTPS load balancing</li><li>Network load balancing<ul><li>Does not require pre-warming</li></ul></li><li>Global and multi-regional subnetworks</li></ul></li></ul><h3 id=vm-access>VM Access</h3><ul><li>Linux:SSH<ul><li>SSH from GCP console or CloudShell via Cloud SDK</li><li>SSH from computer or third-party client and generate key pair</li><li>Requires firewall rule to allow tcp:22</li></ul></li></ul><h3 id=availability-policy-automatic-changes>Availability policy: Automatic changes</h3><ul><li>Called &ldquo;scheduling options&rdquo; in SDK/API</li><li>Automatic restart<ul><li>Automatic VM restart due to crash or maintenance event<ul><li>Not preemption or a user-initiated terminate</li></ul></li></ul></li><li>On host maintenance<ul><li>Determines wether host is live-migrated or terminated due to a maintenance event. Live migration is the default.</li></ul></li><li>Live migration<ul><li>During maintenance event, VM is migrated to different hardware without interruption.</li><li>Metadata indicates occurrence of live migration.</li></ul></li></ul><h3 id=terminated-vm>Terminated VM</h3><ul><li>No charge for stopped VM<ul><li>Charged for attached disks and IPs</li></ul></li><li>Actions (in the terminated state)<ul><li>Change the machine type.</li><li>Add or removed attached disks; change auto-delete settings.</li><li>Modify instance tags.</li><li>Modify custom VM or project-wide metadata.</li><li>Remove or set a new static IP.</li><li>Modify VM availability policy.</li><li>Can't change the image of a stopped VM.</li></ul></li></ul><h3 id=helpful-bash-commands>Helpful bash commands</h3><ul><li>See information about unused and used memory and swap space: free</li><li>Details about the RAM installed: sudo dmidecode -t 17</li><li>Number of processors: nproc</li><li>CPUs installed: lscpu</li></ul><h3 id=compute-options1>Compute Options</h3><ul><li>Machine types<ul><li>Standard High-memory</li><li>High-CPU</li><li>Memory-optimized</li><li>Compute-optimized</li><li>Shared-core</li><li>Custom machine type</li></ul></li></ul><h3 id=compute-pricing>Compute Pricing</h3><ul><li>Per-second billing, with minimum of 1 minute<ul><li>vCPUs, GPUs, and GB of memory</li></ul></li><li>Resource-based pricing<ul><li>Each vCPU and each GB of memory is billed separately</li></ul></li><li>Discounts:<ul><li>Sustained use (up to 30% discount for instances that run the entire month)</li><li>Committed use</li><li>Preemptible VM instances (their availability varies with usage)</li></ul></li><li>Recommendation Engine<ul><li>Notifies you of underutilized instances</li></ul></li><li>Free usage limits</li></ul><h3 id=special-compute-configurations-options>Special Compute Configurations (Options)</h3><ul><li><p>Preemptible</p><ul><li>Lower price for interruptible service (up to 80%)</li><li>VM might be terminated at any time<ul><li>No charge if terminated in the first 10 minutes</li><li>They live for up to 24 hours max</li><li>30-second warning before termination is executed</li></ul></li><li>No live migrate; no auto restart in preembtible VMs</li><li>CPU quota for a region is splitable between regular and preemption<ul><li>Default: preemptible VMs count against region CPU quota</li></ul></li></ul></li><li><p>Sole-tenant nodes</p><ul><li>For workloads that require physical isolation from other workloads.</li><li>A sole-tenant node is a physical Compute Engine server that is dedicated to hosting VM instances only for a specific project</li></ul></li><li><p>Shielded VMs</p><ul><li>Offer verifiable integrity</li><li>Integrity is verified through the use of secure boot</li><li>Requires shielded images</li></ul></li></ul><h3 id=images>Images</h3><ul><li>What's in an image?<ul><li>Boot loader</li><li>Operating system</li><li>File system structure</li><li>Software</li><li>Customizations</li></ul></li><li>Public base images<ul><li>Linux/Windows images available</li></ul></li><li>Custom Images<ul><li>Create and use a custom image by pre installing software that's been authorized for a specific organization</li></ul></li></ul><h3 id=disk-options>Disk Options:</h3><ul><li>VM comes with a single root persistent disk.</li><li>Image is loaded onto disk during first boot:<ul><li>Bootable: you can attach to a VM and boot from it.</li><li>Durable: can survive VM terminate.</li></ul></li><li>Some OS images are customized for Compute Engine.</li><li>Can survive VM deletion if &ldquo;Delete boot disk when instance is deleted&rdquo; is disabled</li><li>HDD or SSD</li><li>Can be attached in read-only mode to multiple VMs</li><li>Disk resizing: Even running and attached</li><li>Local SSD disks are physicall attached to a VM</li><li>RAM disk (use TMPFS if you want to store data in memory, best for small data structures)</li></ul><p><em><strong>Summary disk options:</strong></em>
| |Persistent disk HDD|Persistent disk SSD|Local SSD disk|RAM disk|
|&mdash;|&mdash;|&mdash;|&mdash;|&mdash;|
|Data redundancy|Yes|Yes|No|No|
|Encryption at rest|Yes|Yes|Yes|N/A|
|Snapshotting|Yes|Yes|No|No|
|Bootable|Yes|Yes|No|No|
|Use case| General, bulk file storage|Very random IOPS|High IOPS and low latency|low latency and risk of data loss|</p><h3 id=maximum-persistent>Maximum persistent</h3><table><thead><tr><th>Machine Type</th><th>Disk number limit</th></tr></thead><tbody><tr><td>Shared-core</td><td>16</td></tr><tr><td>Standard</td><td>128</td></tr><tr><td>High-memory</td><td>128</td></tr><tr><td>High-CPU</td><td>128</td></tr><tr><td>Memory-optimized</td><td>128</td></tr><tr><td>Compute-optimized</td><td>128</td></tr></tbody></table><h3 id=persistent-disk-management-differences>Persistent disk management differences</h3><table><thead><tr><th>Cloud Persistent Disk</th><th>Computer Hardware Disk</th></tr></thead><tbody><tr><td>Single file system is best</td><td>Partitioning</td></tr><tr><td>Resize grow disks</td><td>Repartitioning disk</td></tr><tr><td>Resize file system</td><td>Reformat</td></tr><tr><td>Built-in snapshot service</td><td>Redundant disk arrays</td></tr><tr><td>Automatic encryption</td><td>Subvolume management and snapshots</td></tr><tr><td>-</td><td>Encrypt files before write to disk</td></tr></tbody></table><h3 id=common-compute-engine-actions>Common Compute Engine Actions</h3><ul><li>Move an instance to a new zone</li><li>Persistent disk snapshots (backups..)13<ul><li>Snapshot is not available for local SSD</li><li>Creates an incremental backup of Cloud Storage</li><li>Snapshots can be restored to a new persistent disk</li></ul></li><li>Resize persistent disk<ul><li>Disks can grow but never shrinked.</li></ul></li></ul><h3 id=question-notes>Question notes:</h3><ul><li>In GCP, what is the minimum number of IP addresses that a VM instance needs?<ul><li>One: Only an internal IP address</li></ul></li><li>What are the three types of networks offered in the Google Cloud Platform?<ul><li>Default network, auto network, and custom network.</li></ul></li><li>What is one benefit of applying firewall rules by tag rather than by address?<ul><li>When a VM is created with a matching tag, the firewall rules apply irrespective of the IP address it is assigned.</li></ul></li></ul></article></main><nav class="end-nav side-padding"><a ontouchstart=cardPressed.call(this) ontouchend=cardReleased.call(this) ontouchmove=cardReleased.call(this) href=https://v9rt3x.github.io/posts/fingerpicking/ class="card blog-card" rel=bookmark><article class=card-body><h2 class=card-title>Windy and Warm</h2><p class=card-text>The fingerpicking category is the place I'll write about an amazing area of guitar music namely fingerpicking. Beside that I'll also present some self-recorded stuff. Hope you'll enjoy.</p><div class="card-subtext muted-text"><p>Posted <time datetime="2019-12-08 128:00">Dec 8, 2019</time></p><p>#Fingerpicking</p></div></article></a><a ontouchstart=cardPressed.call(this) ontouchend=cardReleased.call(this) ontouchmove=cardReleased.call(this) href=https://v9rt3x.github.io class="card home-card" style=background-image:url(https://v9rt3x.github.io/img/grey-cloud.jpg) rel=bookmark>Home</a></nav><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous onload=renderMathInElement(document.body);></script><script src=https://v9rt3x.github.io/js/core.min.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>